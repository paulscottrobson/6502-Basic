; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		chr.asm
;		Purpose:	Chr$() function
;		Created:	28th February 2021
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section code		

; ************************************************************************************************
;
;									make CHR$(Y) at stack A.
;
; ************************************************************************************************

StringChrs:	;; <chrs>		
		tax 								; set up stack
		lda 	#2
		jsr 	AllocateSoftString
		tya
		jsr 	WriteSoftString
		jsr 	ReturnSoftString
		txa
		rts

; ************************************************************************************************
;
;							Put value of current soft string on stack.
;
; ************************************************************************************************

ReturnSoftString:
		lda 	softMemAlloc
		sta 	esInt0,x		
		lda 	softMemAlloc+1
		sta 	esInt1,x		
		lda 	#0
		sta 	esInt2,x		
		sta 	esInt3,x		
		lda 	#$40
		sta 	esType,x
		rts

		.send 	code
